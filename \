import React from 'react';
import { Field } from 'redux-form';

export default class NewPostForm extends React.Component {
	constructor(props) {
		super(props);
	}

	renderField({ input, type, placeholder, id, className, meta: {asyncValidating, touched, error}}){
		return (
			<div className={asyncValidating ? 'asyncValidating' : ''}>
				<input {...input} type={type} placeholder={placeholder} id={id} className={className} required />
				{ touched && error && <span className="text-danger">{error}</span> }
			</div>
		);
	}

	renderTextArea({ input, rows, placeholder, id, className, meta: {asyncValidating, touched, error}}){
		return (
			<div className={asyncValidating ? 'asyncValidating' : ''}>
				<textarea {...input} rows={rows} placeholder={placeholder} id={id} className={className} required />
				{ touched && error && <span className="text-danger">{error}</span> }
			</div>
		);
	}

	render() {
		const { handleSubmit, pristine, submitting } = this.props;
		return (
			<div className="new-post-form panel panel-primary">
				<div className="panel-heading">
					<h4 className="panel-title">Bài đăng mới</h4>
				</div>
				<div className="panel-content">
					<form onSubmit={handleSubmit(this.props.post.bind(this))} className="form-horizontal" id="register-form">
						<fieldset>
							<legend>Thông tin cần thiết</legend>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-title">Tựa đề</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="text" id="input-title" placeholder="Tựa đề" name="title"/>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-description">Mô tả</label>
								<div className="col-md-10">
									<Field component={ this.renderTextArea } className="form-control" rows="5" id="input-description" placeholder="Mô tả" name="description"/>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-area">Diện tích</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="number" id="input-area" placeholder="Diện tích" name="area"/>
								</div>
							</div>
						>	<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-accommodation">Loại nhà đất</label>
								<Field component="select" className="form-control col-md-10" id="input-accommodation" name="accommodation">
									<option>Placeholder</option>
								</Field>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-price">Giá</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="number" id="input-price" placeholder="Giá" name="price"/>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-unit">Đơn vị</label>
								<div className="col-md-10">
									<Field component="select" className="form-control"id="input-unit" placeholder="Xác nhận mật khẩu" name="unit">
										<option>Placeholder</option>
								</Field>>
								</div>
							</div>
							<br/>
							<div className="form-group">
								<label className="col-md-2 control-label">Loại bài đăng</label>
								<div className="col-md-10">
									<div className="radio radio-primary">
										<label>
											<Field component="input" type="radio" name="type" id="sales-radio" value="sales" required/>
											Nhà đất bán
										</label>
									</div>
									<div className="radio radio-primary">
										<label>
											<Field component="input" type="radio" name="type" id="rent-radio" value="rent" />
											Nhà đất cho thuê
										</label>
									</div>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-floors">Số tầng</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="number" id="input-floors" placeholder="Số tầng" name="floors"/>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-toilets">Số toilet</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="number" id="input-toilets" placeholder="Số toilet" name="toilets"/>
								</div>
							</div>
							<div className="form-group">
								<label className="col-md-2 control-label" htmlFor="input-bedrooms">Số phòng ngủ</label>
								<div className="col-md-10">
									<Field component={ this.renderField } className="form-control" type="number" id="input-bedrooms" placeholder="Số phòng ngủ" name="bedrooms"/>
								</div>
							</div>
							<div className="form-group">
								<div className="col-md-2 col-md-offset-8">
									<button type="submit" className="btn btn-raised btn-primary" disabled={ pristine || submitting }>Đăng bài</button>
								</div>
							</div>
						</fieldset>
					</form>
				</div>
			</div>
		)
	}
}
